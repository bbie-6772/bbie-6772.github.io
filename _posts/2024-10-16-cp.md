---
layout : post
title: 게임서버 개발 교육 사전캠프 10일차
tags: [study, server, SQL]
date: 2024-10-16 17:30 +0900
toc : true
---

---

## TIL(Today I Learned)

---

### 오늘의 공부!

#### 1. <span style="color : #F08080">**[왕초보] 웹개발 종합반**</span> 4주차를 수강했다!

- 오늘은 쉽게 끝났다

#### 2. **노션 퀘스트 SQL 실전! 과제** Lv3. 까지 수행

##### Lv.4 단골 고객님 찾기

###### 1. 고객별로 주문 건수와 총 주문 금액을 조회하는 SQL 쿼리를 작성해주세요.

```sql

SELECT  c.CustomerName 
        , COUNT(o.CustomerID) OrderCount
        , SUM(o.TotalAmount) TotalSpent
FROM customers c 
    LEFT JOIN orders o 
        ON c.CustomerID = o.CustomerID
GROUP BY 1

```  

###### 2. 나라별로 총 주문 금액이 가장 높은 고객의 이름과 그 고객의 총 주문 금액을 조회하는 SQL 쿼리를 작성해주세요.

```sql

SELECT  c.Country 
        , c.customerName Top_Customer
        , SUM(o.TotalAmount) TotalSpent
FROM customers c 
    LEFT JOIN orders o 
        ON c.CustomerID = o.CustomerID
GROUP BY 1, 2
HAVING (c.Country, SUM(o.TotalAmount)) IN
(
SELECT  Country 
        , MAX(TotalSpent)
FROM
(
SELECT  c.Country
        , c.CustomerName
        , SUM(o.TotalAmount) TotalSpent
FROM customers c 
    LEFT JOIN orders o 
        ON c.CustomerID = o.CustomerID
GROUP BY 1, 2
) a
GROUP BY 1
)

```

### 학습 과정 중 특이사항!

- 블로그를 포스트가 안올라 갈때마다 여러 방법으로 코드를 수정하면서 적용하느라 시간이 많이 지나갔는데,  
어이없게도 게시 일의 "시간"이 "현재 시간"보다 크면 안돼는 오류였다..  
  
- 무요

---